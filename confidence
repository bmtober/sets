me=$(basename $0)

usage="

NAME
  ${me} - Confidence in an association rule.

SYNOPSIS
  ${me} [OPTIONS] anticedent consequent directory

DESCRIPTION
  ${me} returns the confidence of an associate between the antiecedent
        and the consequent over a directory of set files.

OPTIONS
  -h  Displays help message.

AUTHOR
  Implementation by Berend M. Tober.

"

anticedent="-"
directory="./"

while [[ $# -gt 0 ]]
do
  case "${1}" in
    -h)
      echo "${usage}"
      exit
      ;;
    -*)
      echo "Invalid option '${1}'"
      exit
      ;;
    *)
      anticedent="${1--}"
      consequent="${2--}"
      directory="${3-./}"
      shift 3
      ;;
  esac
  shift
done  

tmpfile=".$0.$$"
trap 'rm "${tmpfile}"' EXIT
cat "${anticedent}" "${consequent}" > "${tmpfile}"

numerator=$(./support "${tmpfile}" "${directory}")
denominator=$(./support "${anticedent}" "${directory}")

echo "$numerator $denominator"
dc <<< "10k$numerator $denominator /p"

